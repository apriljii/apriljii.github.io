<!DOCTYPE html>
<html lang=ch>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="本文将探讨 MS UI System 在 Vue 2 项目中为 TypeScript 迁移做的前期技术储备，分析渐进式类型化的可行性方案，以及面向未来的技术演进规划。  前言TypeScript 作为现代化前端开发的基础设施，为大型项目提供了类型安全保障和卓越的开发体验。然而对于新建的 Vue 2 企业级组件库，在技术选型阶段就需要谨慎评估是否采用 TypeScript 的技术风险和业务影响。">
<meta property="og:type" content="article">
<meta property="og:title" content="企业级Vue组件库建设-6. TypeScript渐进式采用与技术储备">
<meta property="og:url" content="https://apriljii.github.io/2024/04/19/06-typescript-gradual-adoption/index.html">
<meta property="og:site_name" content="April">
<meta property="og:description" content="本文将探讨 MS UI System 在 Vue 2 项目中为 TypeScript 迁移做的前期技术储备，分析渐进式类型化的可行性方案，以及面向未来的技术演进规划。  前言TypeScript 作为现代化前端开发的基础设施，为大型项目提供了类型安全保障和卓越的开发体验。然而对于新建的 Vue 2 企业级组件库，在技术选型阶段就需要谨慎评估是否采用 TypeScript 的技术风险和业务影响。">
<meta property="og:locale">
<meta property="article:published_time" content="2024-04-19T14:46:10.000Z">
<meta property="article:modified_time" content="2026-02-03T12:46:26.659Z">
<meta property="article:author" content="April Ji">
<meta property="article:tag" content="Vue.js 组件库 TypeScript 前端架构 类型安全">
<meta name="twitter:card" content="summary">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>企业级Vue组件库建设-6. TypeScript渐进式采用与技术储备</title>
    <!-- async scripts -->
    <!-- Google Analytics -->


    <!-- Umami Analytics -->


    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	
	<!-- mermaid -->
	<script src='https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js'></script>
	<script>
		mermaid.initialize({
			startOnLoad: true,
			theme: 'dark',
			securityLevel: 'loose'
		});
	</script>
<meta name="generator" content="Hexo 7.3.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="Menu"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="Top" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa-solid fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/about/">About</a></li><!--
     --><!--
       --><li><a href="/archives/">Writing</a></li><!--
     --><!--
       --><li><a href="https://github.com/apriljii">Projects</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="Previous post" href="/2024/04/23/07-build-toolchain-evolution/"><i class="fa-solid fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="Next post" href="/2024/04/15/05-complex-data-components/"><i class="fa-solid fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="Back to top" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="Share post" href="#"><i class="fa-solid fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://apriljii.github.io/2024/04/19/06-typescript-gradual-adoption/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://apriljii.github.io/2024/04/19/06-typescript-gradual-adoption/&text=企业级Vue组件库建设-6. TypeScript渐进式采用与技术储备"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://apriljii.github.io/2024/04/19/06-typescript-gradual-adoption/&title=企业级Vue组件库建设-6. TypeScript渐进式采用与技术储备"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://apriljii.github.io/2024/04/19/06-typescript-gradual-adoption/&is_video=false&description=企业级Vue组件库建设-6. TypeScript渐进式采用与技术储备"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=企业级Vue组件库建设-6. TypeScript渐进式采用与技术储备&body=Check out this article: https://apriljii.github.io/2024/04/19/06-typescript-gradual-adoption/"><i class="fa-solid fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://apriljii.github.io/2024/04/19/06-typescript-gradual-adoption/&title=企业级Vue组件库建设-6. TypeScript渐进式采用与技术储备"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://apriljii.github.io/2024/04/19/06-typescript-gradual-adoption/&title=企业级Vue组件库建设-6. TypeScript渐进式采用与技术储备"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://apriljii.github.io/2024/04/19/06-typescript-gradual-adoption/&title=企业级Vue组件库建设-6. TypeScript渐进式采用与技术储备"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://apriljii.github.io/2024/04/19/06-typescript-gradual-adoption/&title=企业级Vue组件库建设-6. TypeScript渐进式采用与技术储备"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://apriljii.github.io/2024/04/19/06-typescript-gradual-adoption/&name=企业级Vue组件库建设-6. TypeScript渐进式采用与技术储备&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://news.ycombinator.com/submitlink?u=https://apriljii.github.io/2024/04/19/06-typescript-gradual-adoption/&t=企业级Vue组件库建设-6. TypeScript渐进式采用与技术储备"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    
    
      <div id="toc-container">
        <div id="toc-toggle" class="toc-toggle-btn">
          <i class="fa-solid fa-list"></i>
          <span>Table of Contents</span>
        </div>
        <div id="toc" style="display: none;">
          <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81TypeScript-%E4%BD%BF%E7%94%A8%E7%9A%84%E6%8A%80%E6%9C%AF%E5%8F%AF%E8%A1%8C%E6%80%A7%E8%AF%84%E4%BC%B0"><span class="toc-number">2.</span> <span class="toc-text">一、TypeScript 使用的技术可行性评估</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-%E5%BD%93%E5%89%8D%E6%8A%80%E6%9C%AF%E6%A0%88%E7%8E%B0%E7%8A%B6%E5%88%86%E6%9E%90"><span class="toc-number">2.1.</span> <span class="toc-text">1.1 当前技术栈现状分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-Vue-2-TypeScript-%E7%9A%84%E6%8A%80%E6%9C%AF%E6%8C%91%E6%88%98%E8%AF%84%E4%BC%B0"><span class="toc-number">2.2.</span> <span class="toc-text">1.2 Vue 2 + TypeScript 的技术挑战评估</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-TypeScript-%E6%8A%80%E6%9C%AF%E6%A0%88%E9%80%89%E5%9E%8B%E8%A7%84%E5%88%92"><span class="toc-number">2.3.</span> <span class="toc-text">1.3 TypeScript 技术栈选型规划</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81TypeScript-%E8%BF%81%E7%A7%BB%E8%A7%84%E5%88%92%E4%B8%8E%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="toc-number">3.</span> <span class="toc-text">二、TypeScript 迁移规划与准备工作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E7%B1%BB%E5%9E%8B%E5%AE%9A%E4%B9%89%E4%BD%93%E7%B3%BB%E5%BB%BA%E8%AE%BE%E8%A7%84%E5%88%92"><span class="toc-number">3.1.</span> <span class="toc-text">2.1 类型定义体系建设规划</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E6%B8%90%E8%BF%9B%E5%BC%8F%E8%BF%81%E7%A7%BB%E7%AD%96%E7%95%A5%E8%A7%84%E5%88%92"><span class="toc-number">3.2.</span> <span class="toc-text">2.2 渐进式迁移策略规划</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%98%B6%E6%AE%B5%E4%B8%80%EF%BC%9A%E5%9F%BA%E7%A1%80%E8%AE%BE%E6%96%BD%E5%AE%8C%E5%96%84%EF%BC%88%E5%B7%B2%E5%AE%8C%E6%88%90%EF%BC%89"><span class="toc-number">3.2.1.</span> <span class="toc-text">阶段一：基础设施完善（已完成）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%98%B6%E6%AE%B5%E4%BA%8C%EF%BC%9A%E7%B1%BB%E5%9E%8B%E5%AE%9A%E4%B9%89%E4%BD%93%E7%B3%BB%E5%BB%BA%E8%AE%BE%EF%BC%88%E8%A7%84%E5%88%92%E4%B8%AD%EF%BC%89"><span class="toc-number">3.2.2.</span> <span class="toc-text">阶段二：类型定义体系建设（规划中）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%98%B6%E6%AE%B5%E4%BA%8C%EF%BC%9AVue-%E7%BB%84%E4%BB%B6%E7%9A%84%E7%B1%BB%E5%9E%8B%E5%8C%96"><span class="toc-number">3.2.3.</span> <span class="toc-text">阶段二：Vue 组件的类型化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E7%BB%84%E4%BB%B6%E7%B1%BB%E5%9E%8B%E5%8C%96%E8%BF%81%E7%A7%BB%EF%BC%88%E5%BE%85%E5%AE%9E%E6%96%BD%EF%BC%89"><span class="toc-number">3.2.4.</span> <span class="toc-text">阶段三：组件类型化迁移（待实施）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%98%B6%E6%AE%B5%E5%9B%9B%EF%BC%9A%E7%94%9F%E6%80%81%E7%B3%BB%E7%BB%9F%E5%AE%8C%E5%96%84%EF%BC%88%E9%95%BF%E6%9C%9F%E8%A7%84%E5%88%92%EF%BC%89"><span class="toc-number">3.2.5.</span> <span class="toc-text">阶段四：生态系统完善（长期规划）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E7%B1%BB%E5%9E%8B%E5%AE%9A%E4%B9%89%E6%96%87%E4%BB%B6%E7%9A%84%E7%BB%84%E7%BB%87%E7%BB%93%E6%9E%84"><span class="toc-number">3.3.</span> <span class="toc-text">2.3 类型定义文件的组织结构</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E7%8E%B0%E6%9C%89-JavaScript-%E4%BB%A3%E7%A0%81%E7%9A%84%E7%B1%BB%E5%9E%8B%E8%BF%81%E7%A7%BB%E7%AD%96%E7%95%A5"><span class="toc-number">4.</span> <span class="toc-text">三、现有 JavaScript 代码的类型迁移策略</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-JSDoc-%E6%B3%A8%E9%87%8A%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%A0%87%E6%B3%A8"><span class="toc-number">4.1.</span> <span class="toc-text">3.1 JSDoc 注释的类型标注</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E6%B8%90%E8%BF%9B%E5%BC%8F%E9%87%8D%E6%9E%84%E7%AD%96%E7%95%A5"><span class="toc-number">4.2.</span> <span class="toc-text">3.2 渐进式重构策略</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%87%8D%E6%9E%84%E6%AD%A5%E9%AA%A4%E4%B8%80%EF%BC%9A%E6%B7%BB%E5%8A%A0%E7%B1%BB%E5%9E%8B%E6%B3%A8%E9%87%8A"><span class="toc-number">4.2.1.</span> <span class="toc-text">重构步骤一：添加类型注释</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%87%8D%E6%9E%84%E6%AD%A5%E9%AA%A4%E4%BA%8C%EF%BC%9A%E8%BD%AC%E6%8D%A2%E4%B8%BA-TypeScript"><span class="toc-number">4.2.2.</span> <span class="toc-text">重构步骤二：转换为 TypeScript</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%87%8D%E6%9E%84%E6%AD%A5%E9%AA%A4%E4%B8%89%EF%BC%9A%E7%BB%84%E4%BB%B6%E9%87%8D%E6%9E%84"><span class="toc-number">4.2.3.</span> <span class="toc-text">重构步骤三：组件重构</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E7%B1%BB%E5%9E%8B%E6%A3%80%E6%9F%A5%E5%B7%A5%E5%85%B7%E7%9A%84%E9%85%8D%E7%BD%AE%E5%92%8C%E4%BD%BF%E7%94%A8"><span class="toc-number">4.3.</span> <span class="toc-text">3.3 类型检查工具的配置和使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ESLint-TypeScript-%E9%9B%86%E6%88%90"><span class="toc-number">4.3.1.</span> <span class="toc-text">ESLint + TypeScript 集成</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#VS-Code-%E9%85%8D%E7%BD%AE%E4%BC%98%E5%8C%96"><span class="toc-number">4.3.2.</span> <span class="toc-text">VS Code 配置优化</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E7%B1%BB%E5%9E%8B%E5%AE%89%E5%85%A8%E4%B8%8E%E5%BC%80%E5%8F%91%E6%95%88%E7%8E%87%E7%9A%84%E5%B9%B3%E8%A1%A1"><span class="toc-number">5.</span> <span class="toc-text">四、类型安全与开发效率的平衡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E5%AE%9E%E7%94%A8%E4%B8%BB%E4%B9%89%E7%B1%BB%E5%9E%8B%E7%AD%96%E7%95%A5"><span class="toc-number">5.1.</span> <span class="toc-text">4.1 实用主义类型策略</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%88%E7%90%86%E7%9A%84-any-%E4%BD%BF%E7%94%A8"><span class="toc-number">5.1.1.</span> <span class="toc-text">合理的 any 使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B8%90%E8%BF%9B%E5%BC%8F%E4%B8%A5%E6%A0%BC%E6%A8%A1%E5%BC%8F"><span class="toc-number">5.1.2.</span> <span class="toc-text">渐进式严格模式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E7%B1%BB%E5%9E%8B%E5%AE%9A%E4%B9%89%E7%9A%84%E7%BB%B4%E6%8A%A4%E7%AD%96%E7%95%A5"><span class="toc-number">5.2.</span> <span class="toc-text">4.2 类型定义的维护策略</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93%E7%B1%BB%E5%9E%8B%E8%A1%A5%E5%85%85"><span class="toc-number">5.2.1.</span> <span class="toc-text">第三方库类型补充</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%9A%E7%94%A8%E5%B7%A5%E5%85%B7%E7%B1%BB%E5%9E%8B%E7%9A%84%E7%A7%AF%E7%B4%AF"><span class="toc-number">5.2.2.</span> <span class="toc-text">通用工具类型的积累</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E4%B8%8E%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%93%BE%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%94%AF%E6%8C%81"><span class="toc-number">6.</span> <span class="toc-text">五、构建工具与开发工具链的类型支持</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-Webpack-TypeScript-%E9%85%8D%E7%BD%AE"><span class="toc-number">6.1.</span> <span class="toc-text">5.1 Webpack + TypeScript 配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E7%9A%84-TypeScript-%E6%94%AF%E6%8C%81"><span class="toc-number">6.2.</span> <span class="toc-text">5.2 开发工具的 TypeScript 支持</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E9%80%89%E5%9E%8B%E7%9A%84%E6%9D%83%E8%A1%A1"><span class="toc-number">7.</span> <span class="toc-text">构建工具选型的权衡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-Vue-2-%E4%BC%81%E4%B8%9A%E7%BA%A7%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%9E%84%E5%BB%BA%E7%AD%96%E7%95%A5"><span class="toc-number">7.1.</span> <span class="toc-text">5.1 Vue 2 企业级项目的构建策略</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-TypeScript-%E6%94%AF%E6%8C%81%E8%83%BD%E5%8A%9B%E5%AF%B9%E6%AF%94"><span class="toc-number">7.2.</span> <span class="toc-text">5.2 TypeScript 支持能力对比</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-%E7%B1%BB%E5%9E%8B%E6%A3%80%E6%9F%A5%E7%9A%84-CI-CD-%E9%9B%86%E6%88%90"><span class="toc-number">7.3.</span> <span class="toc-text">5.3 类型检查的 CI&#x2F;CD 集成</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E6%8A%80%E6%9C%AF%E5%82%A8%E5%A4%87%E8%AF%84%E4%BC%B0%E4%B8%8E%E8%BF%81%E7%A7%BB%E8%A7%84%E5%88%92%E6%80%BB%E7%BB%93"><span class="toc-number">8.</span> <span class="toc-text">六、技术储备评估与迁移规划总结</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-%E5%BD%93%E5%89%8D%E6%8A%80%E6%9C%AF%E5%82%A8%E5%A4%87%E7%8A%B6%E6%80%81"><span class="toc-number">8.1.</span> <span class="toc-text">6.1 当前技术储备状态</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5"><span class="toc-number">8.1.1.</span> <span class="toc-text">代码规范与最佳实践</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B7%A5%E5%85%B7%E9%93%BE%E4%BC%98%E5%8C%96"><span class="toc-number">8.1.2.</span> <span class="toc-text">工具链优化</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E6%8A%80%E6%9C%AF%E9%80%89%E5%9E%8B%E5%BB%BA%E8%AE%AE"><span class="toc-number">9.</span> <span class="toc-text">七、技术选型建议</span></a></li></ol>
        </div>
      </div>
    
  </span>
</div>

    
    <div class="content index py4 ">
        
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle p-name" itemprop="name headline">
        企业级Vue组件库建设-6. TypeScript渐进式采用与技术储备
    </h1>
    



    <div class="meta">
      <span class="author p-author h-card" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span class="p-name" itemprop="name">April Ji</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2024-04-19T14:46:10.000Z" class="dt-published" itemprop="datePublished">2024-04-19</time>
        
      
    </div>


      

      
    <div class="article-tag">
        <i class="fa-solid fa-tag"></i>
        <a class="p-category" href="/tags/Vue-js-%E7%BB%84%E4%BB%B6%E5%BA%93-TypeScript-%E5%89%8D%E7%AB%AF%E6%9E%B6%E6%9E%84-%E7%B1%BB%E5%9E%8B%E5%AE%89%E5%85%A8/" rel="tag">Vue.js 组件库 TypeScript 前端架构 类型安全</a>
    </div>


    </div>
  </header>
  

  <div class="content e-content" itemprop="articleBody">
    <blockquote>
<p>本文将探讨 MS UI System 在 Vue 2 项目中为 TypeScript 迁移做的前期技术储备，分析渐进式类型化的可行性方案，以及面向未来的技术演进规划。</p>
</blockquote>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>TypeScript 作为现代化前端开发的基础设施，为大型项目提供了类型安全保障和卓越的开发体验。然而对于新建的 Vue 2 企业级组件库，在技术选型阶段就需要谨慎评估是否采用 TypeScript 的技术风险和业务影响。</p>
<p>MS UI System 目前保持 JavaScript 技术栈的稳定性，同时为未来的 TypeScript 迁移做好充分的技术储备。本文将分享我们在类型安全方面的技术探索、和相关的准备工作。</p>
<h2 id="一、TypeScript-使用的技术可行性评估"><a href="#一、TypeScript-使用的技术可行性评估" class="headerlink" title="一、TypeScript 使用的技术可行性评估"></a>一、TypeScript 使用的技术可行性评估</h2><h3 id="1-1-当前技术栈现状分析"><a href="#1-1-当前技术栈现状分析" class="headerlink" title="1.1 当前技术栈现状分析"></a>1.1 当前技术栈现状分析</h3><p>MS UI System 目前采用纯 JavaScript 技术栈，基于 Vue 2.6+ 构建。项目已为 TypeScript 迁移做好基础设施准备：</p>
<ul>
<li><strong>构建工具支持</strong>：配置了 TypeScript 编译器和类型检查工具</li>
<li><strong>开发环境配置</strong>：IDE 已支持 TypeScript 语法高亮和错误提示</li>
<li><strong>代码规范准备</strong>：ESLint 和 Prettier 已配置对 TypeScript 文件的支持</li>
</ul>
<h3 id="1-2-Vue-2-TypeScript-的技术挑战评估"><a href="#1-2-Vue-2-TypeScript-的技术挑战评估" class="headerlink" title="1.2 Vue 2 + TypeScript 的技术挑战评估"></a>1.2 Vue 2 + TypeScript 的技术挑战评估</h3><p>Vue 2 官方对 TypeScript 的支持相对有限，存在一些技技术挑战，包括：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Vue 2 中的类型定义挑战</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 传统 Options API 的类型推断困难</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Vue</span>.<span class="title function_">extend</span>(&#123;</span><br><span class="line">  <span class="attr">props</span>: &#123;</span><br><span class="line">    <span class="comment">// 难以精确定义复杂 props 类型</span></span><br><span class="line">    <span class="attr">config</span>: <span class="title class_">Object</span> <span class="keyword">as</span> <span class="title class_">PropType</span>&lt;<span class="title class_">ComplexConfig</span>&gt;,</span><br><span class="line">    <span class="attr">data</span>: <span class="title class_">Array</span> <span class="keyword">as</span> <span class="title class_">PropType</span>&lt;<span class="title class_">DataItem</span>[]&gt;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="comment">// data 类型推断不准确</span></span><br><span class="line">      <span class="attr">items</span>: [] <span class="keyword">as</span> <span class="built_in">any</span>[],</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">computed</span>: &#123;</span><br><span class="line">    <span class="comment">// computed 类型需要手动标注</span></span><br><span class="line">    <span class="title function_">filteredItems</span>(): <span class="title class_">DataItem</span>[] &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">items</span>.<span class="title function_">filter</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> item.<span class="property">active</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="comment">// 方法参数类型难以推断</span></span><br><span class="line">    <span class="title function_">handleItemClick</span>(<span class="params"><span class="attr">item</span>: <span class="built_in">any</span></span>) &#123;</span><br><span class="line">      <span class="comment">// item 参数类型未知</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><strong>主要技术挑战：</strong></p>
<ul>
<li><strong>Options API 类型支持有限</strong>：Vue 2 的 Options API 在 TypeScript 中类型推断不够精确</li>
<li><strong>装饰器支持不成熟</strong>：vue-class-component 和 vue-property-decorator 生态相对小众</li>
<li><strong>构建工具配置复杂</strong>：需要额外配置 vue-loader、ts-loader 等</li>
<li><strong>第三方库类型定义不完善</strong>：许多 Vue 2 插件缺乏完善的类型定义</li>
</ul>
<h3 id="1-3-TypeScript-技术栈选型规划"><a href="#1-3-TypeScript-技术栈选型规划" class="headerlink" title="1.3 TypeScript 技术栈选型规划"></a>1.3 TypeScript 技术栈选型规划</h3><p>基于项目的技术评估和未来规划，这里记录一下为 TypeScript 迁移做的准备：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// package.json 中的 TypeScript 技术储备</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;devDependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;typescript&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^5.1.6&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;vue-tsc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^1.8.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@types/node&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^18.16.0&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;build:types&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vue-tsc --declaration --emitDeclarationOnly&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;type-check&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vue-tsc --noEmit&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// tsconfig.json 配置</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;target&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ES2020&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;useDefineForClassFields&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;lib&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;ES2020&quot;</span><span class="punctuation">,</span> <span class="string">&quot;DOM&quot;</span><span class="punctuation">,</span> <span class="string">&quot;DOM.Iterable&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;module&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ESNext&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;skipLibCheck&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;moduleResolution&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bundler&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;allowImportingTsExtensions&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;resolveJsonModule&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;isolatedModules&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;noEmit&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;jsx&quot;</span><span class="punctuation">:</span> <span class="string">&quot;preserve&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;strict&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span> <span class="comment">// 渐进式启用严格模式</span></span><br><span class="line">    <span class="attr">&quot;noUnusedLocals&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;noUnusedParameters&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;noFallthroughCasesInSwitch&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;include&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;src/**/*.ts&quot;</span><span class="punctuation">,</span> <span class="string">&quot;src/**/*.d.ts&quot;</span><span class="punctuation">,</span> <span class="string">&quot;src/**/*.tsx&quot;</span><span class="punctuation">,</span> <span class="string">&quot;src/**/*.vue&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;references&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span> <span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./tsconfig.node.json&quot;</span> <span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p><strong>技术选型考虑：</strong></p>
<ul>
<li><strong>严格模式渐进启用</strong>：从宽松模式开始，逐步提高类型检查严格程度</li>
<li><strong>Vue 文件支持</strong>：配置 vue-tsc 支持 .vue 文件的类型检查</li>
<li><strong>现代 TypeScript 特性</strong>：使用 TypeScript 5.x 的最新特性</li>
<li><strong>构建工具集成</strong>：与 Vite 和 Webpack 构建链集成</li>
</ul>
<h2 id="二、TypeScript-迁移规划与准备工作"><a href="#二、TypeScript-迁移规划与准备工作" class="headerlink" title="二、TypeScript 迁移规划与准备工作"></a>二、TypeScript 迁移规划与准备工作</h2><h3 id="2-1-类型定义体系建设规划"><a href="#2-1-类型定义体系建设规划" class="headerlink" title="2.1 类型定义体系建设规划"></a>2.1 类型定义体系建设规划</h3><p>为未来的 TypeScript 迁移建立完整的类型定义体系：</p>
<p><strong>当前状态</strong>：项目正在进行类型定义的基础架构设计，尚未在组件代码中实施。</p>
<p><strong>规划目标</strong>：建立可复用的类型定义体系，为渐进式迁移提供基础：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/types/index.ts - 核心类型定义</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">ComponentProps</span> &#123;</span><br><span class="line">  <span class="attr">theme</span>?: <span class="string">&quot;light&quot;</span> | <span class="string">&quot;dark&quot;</span> | <span class="string">&quot;fintech&quot;</span>;</span><br><span class="line">  <span class="attr">size</span>?: <span class="string">&quot;small&quot;</span> | <span class="string">&quot;medium&quot;</span> | <span class="string">&quot;large&quot;</span>;</span><br><span class="line">  <span class="attr">density</span>?: <span class="string">&quot;compact&quot;</span> | <span class="string">&quot;normal&quot;</span> | <span class="string">&quot;comfortable&quot;</span>;</span><br><span class="line">  <span class="attr">disabled</span>?: <span class="built_in">boolean</span>;</span><br><span class="line">  <span class="attr">loading</span>?: <span class="built_in">boolean</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">TableColumn</span> &#123;</span><br><span class="line">  <span class="attr">prop</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">label</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">width</span>?: <span class="built_in">number</span> | <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">sortable</span>?: <span class="built_in">boolean</span>;</span><br><span class="line">  <span class="attr">component</span>?: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">props</span>?: <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="built_in">any</span>&gt;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">FormField</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">label</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&quot;input&quot;</span> | <span class="string">&quot;select&quot;</span> | <span class="string">&quot;date&quot;</span> | <span class="string">&quot;switch&quot;</span>;</span><br><span class="line">  <span class="attr">rules</span>?: <span class="title class_">ValidationRule</span>[];</span><br><span class="line">  <span class="attr">props</span>?: <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="built_in">any</span>&gt;;</span><br><span class="line">  <span class="attr">options</span>?: <span class="title class_">SelectOption</span>[];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">ValidationRule</span> &#123;</span><br><span class="line">  <span class="attr">required</span>?: <span class="built_in">boolean</span>;</span><br><span class="line">  <span class="attr">message</span>?: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">type</span>?: <span class="string">&quot;email&quot;</span> | <span class="string">&quot;number&quot;</span> | <span class="string">&quot;date&quot;</span>;</span><br><span class="line">  <span class="attr">min</span>?: <span class="built_in">number</span>;</span><br><span class="line">  <span class="attr">max</span>?: <span class="built_in">number</span>;</span><br><span class="line">  <span class="attr">pattern</span>?: <span class="title class_">RegExp</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">SelectOption</span> &#123;</span><br><span class="line">  <span class="attr">label</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">value</span>: <span class="built_in">any</span>;</span><br><span class="line">  <span class="attr">disabled</span>?: <span class="built_in">boolean</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 工具类型</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> <span class="title class_">DeepPartial</span>&lt;T&gt; = &#123;</span><br><span class="line">  [P <span class="keyword">in</span> keyof T]?: T[P] <span class="keyword">extends</span> <span class="built_in">object</span> ? <span class="title class_">DeepPartial</span>&lt;T[P]&gt; : T[P];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> <span class="title class_">ComponentSize</span> = <span class="string">&quot;small&quot;</span> | <span class="string">&quot;medium&quot;</span> | <span class="string">&quot;large&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> <span class="title class_">ComponentTheme</span> = <span class="string">&quot;light&quot;</span> | <span class="string">&quot;dark&quot;</span> | <span class="string">&quot;fintech&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> <span class="title class_">ComponentDensity</span> = <span class="string">&quot;compact&quot;</span> | <span class="string">&quot;normal&quot;</span> | <span class="string">&quot;comfortable&quot;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="2-2-渐进式迁移策略规划"><a href="#2-2-渐进式迁移策略规划" class="headerlink" title="2.2 渐进式迁移策略规划"></a>2.2 渐进式迁移策略规划</h3><h4 id="阶段一：基础设施完善（已完成）"><a href="#阶段一：基础设施完善（已完成）" class="headerlink" title="阶段一：基础设施完善（已完成）"></a>阶段一：基础设施完善（已完成）</h4><p><strong>当前状态</strong>：项目已完成 TypeScript 基础设施配置</p>
<ul>
<li>✅ TypeScript 编译器配置 (tsconfig.json)</li>
<li>✅ Vue 文件类型支持 (vue-tsc)</li>
<li>✅ 构建脚本准备 (build:types, type-check)</li>
<li>✅ IDE 支持配置</li>
</ul>
<h4 id="阶段二：类型定义体系建设（规划中）"><a href="#阶段二：类型定义体系建设（规划中）" class="headerlink" title="阶段二：类型定义体系建设（规划中）"></a>阶段二：类型定义体系建设（规划中）</h4><p>建立完整的类型定义体系，为组件迁移做准备：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/utils/type-guards.ts - 类型守卫函数</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">isString</span>(<span class="params"><span class="attr">value</span>: <span class="built_in">unknown</span></span>): value is <span class="built_in">string</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">typeof</span> value === <span class="string">&quot;string&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">isNumber</span>(<span class="params"><span class="attr">value</span>: <span class="built_in">unknown</span></span>): value is <span class="built_in">number</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">typeof</span> value === <span class="string">&quot;number&quot;</span> &amp;&amp; !<span class="built_in">isNaN</span>(value);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">isObject</span>(<span class="params"><span class="attr">value</span>: <span class="built_in">unknown</span></span>): value is <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="built_in">any</span>&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> value !== <span class="literal">null</span> &amp;&amp; <span class="keyword">typeof</span> value === <span class="string">&quot;object&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">isArray</span>(<span class="params"><span class="attr">value</span>: <span class="built_in">unknown</span></span>): value is <span class="built_in">any</span>[] &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Array</span>.<span class="title function_">isArray</span>(value);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// src/utils/formatters.ts - 格式化工具</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">formatCurrency</span>(<span class="params"></span></span><br><span class="line"><span class="params">  <span class="attr">value</span>: <span class="built_in">number</span>,</span></span><br><span class="line"><span class="params">  <span class="attr">currency</span>: <span class="built_in">string</span> = <span class="string">&quot;CNY&quot;</span>,</span></span><br><span class="line"><span class="params">  <span class="attr">precision</span>: <span class="built_in">number</span> = <span class="number">2</span></span></span><br><span class="line"><span class="params"></span>): <span class="built_in">string</span> &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Intl</span>.<span class="title class_">NumberFormat</span>(<span class="string">&quot;zh-CN&quot;</span>, &#123;</span><br><span class="line">      <span class="attr">style</span>: <span class="string">&quot;currency&quot;</span>,</span><br><span class="line">      currency,</span><br><span class="line">      <span class="attr">minimumFractionDigits</span>: precision,</span><br><span class="line">      <span class="attr">maximumFractionDigits</span>: precision,</span><br><span class="line">    &#125;).<span class="title function_">format</span>(value);</span><br><span class="line">  &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;currency&#125;</span> <span class="subst">$&#123;value.toFixed(precision)&#125;</span>`</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">formatPercentage</span>(<span class="params"><span class="attr">value</span>: <span class="built_in">number</span>, <span class="attr">precision</span>: <span class="built_in">number</span> = <span class="number">2</span></span>): <span class="built_in">string</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;(value * <span class="number">100</span>).toFixed(precision)&#125;</span>%`</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="阶段二：Vue-组件的类型化"><a href="#阶段二：Vue-组件的类型化" class="headerlink" title="阶段二：Vue 组件的类型化"></a>阶段二：Vue 组件的类型化</h4><p>为 Vue 组件添加类型定义：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/components/ThemeSwitcher.vue 的类型定义</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">PropType</span> &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">type</span> &#123; <span class="title class_">ComponentTheme</span> &#125; <span class="keyword">from</span> <span class="string">&quot;@/types&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;ThemeSwitcher&quot;</span>,</span><br><span class="line">  <span class="attr">props</span>: &#123;</span><br><span class="line">    <span class="attr">theme</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="title class_">String</span> <span class="keyword">as</span> <span class="title class_">PropType</span>&lt;<span class="title class_">ComponentTheme</span>&gt;,</span><br><span class="line">      <span class="attr">default</span>: <span class="string">&quot;light&quot;</span>,</span><br><span class="line">      <span class="attr">validator</span>: (<span class="attr">value</span>: <span class="built_in">string</span>): <span class="function"><span class="params">boolean</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> [<span class="string">&quot;light&quot;</span>, <span class="string">&quot;dark&quot;</span>, <span class="string">&quot;fintech&quot;</span>].<span class="title function_">includes</span>(value);</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">persistent</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="title class_">Boolean</span>,</span><br><span class="line">      <span class="attr">default</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">emits</span>: &#123;</span><br><span class="line">    <span class="attr">change</span>: <span class="function">(<span class="params"><span class="attr">theme</span>: <span class="title class_">ComponentTheme</span></span>) =&gt;</span> <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="阶段三：组件类型化迁移（待实施）"><a href="#阶段三：组件类型化迁移（待实施）" class="headerlink" title="阶段三：组件类型化迁移（待实施）"></a>阶段三：组件类型化迁移（待实施）</h4><p><strong>规划目标</strong>：在条件成熟时，对核心组件进行类型化改造：</p>
<p><strong>实施策略</strong>：</p>
<ul>
<li>优先迁移工具函数和类型守卫函数</li>
<li>逐步为复杂组件 (Table、Form 等) 添加类型定义</li>
<li>新组件开发强制使用 TypeScript</li>
<li>建立类型定义的评审和维护机制</li>
</ul>
<h4 id="阶段四：生态系统完善（长期规划）"><a href="#阶段四：生态系统完善（长期规划）" class="headerlink" title="阶段四：生态系统完善（长期规划）"></a>阶段四：生态系统完善（长期规划）</h4><ul>
<li>第三方库类型定义完善</li>
<li>CI/CD 中的类型检查集成</li>
<li>团队 TypeScript 技能提升</li>
<li>与 Vue 3 迁移同步进行</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/components/table/ms-table.vue 的类型定义</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">PropType</span> &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">type</span> &#123; <span class="title class_">TableColumn</span>, <span class="title class_">ComponentProps</span> &#125; <span class="keyword">from</span> <span class="string">&quot;@/types&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">TableDataItem</span> &#123;</span><br><span class="line">  [<span class="attr">key</span>: <span class="built_in">string</span>]: <span class="built_in">any</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ToolbarConfig</span> &#123;</span><br><span class="line">  <span class="attr">left</span>?: <span class="title class_">ToolbarItem</span>[];</span><br><span class="line">  <span class="attr">center</span>?: <span class="title class_">ToolbarItem</span>[];</span><br><span class="line">  <span class="attr">right</span>?: <span class="title class_">ToolbarItem</span>[];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ToolbarItem</span> &#123;</span><br><span class="line">  <span class="attr">component</span>?: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">props</span>?: <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="built_in">any</span>&gt;;</span><br><span class="line">  <span class="attr">icon</span>?: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">label</span>?: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">text</span>?: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">action</span>?: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">disabled</span>?: <span class="built_in">boolean</span> | (<span class="function">(<span class="params"><span class="attr">context</span>: <span class="title class_">ToolbarContext</span></span>) =&gt;</span> <span class="built_in">boolean</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ToolbarContext</span> &#123;</span><br><span class="line">  <span class="attr">selectedRows</span>: <span class="title class_">TableDataItem</span>[];</span><br><span class="line">  <span class="attr">totalCount</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="attr">filteredCount</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="attr">sortConfig</span>: <span class="title class_">SortConfig</span>;</span><br><span class="line">  <span class="attr">filterConfig</span>: <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="built_in">any</span>&gt;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">SortConfig</span> &#123;</span><br><span class="line">  <span class="attr">prop</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">order</span>: <span class="string">&quot;ascending&quot;</span> | <span class="string">&quot;descending&quot;</span> | <span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;MsTable&quot;</span>,</span><br><span class="line">  <span class="attr">props</span>: &#123;</span><br><span class="line">    ...<span class="title class_">ComponentProps</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="title class_">Array</span> <span class="keyword">as</span> <span class="title class_">PropType</span>&lt;<span class="title class_">TableDataItem</span>[]&gt;,</span><br><span class="line">      <span class="attr">default</span>: <span class="function">() =&gt;</span> [],</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">columns</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="title class_">Array</span> <span class="keyword">as</span> <span class="title class_">PropType</span>&lt;<span class="title class_">TableColumn</span>[]&gt;,</span><br><span class="line">      <span class="attr">default</span>: <span class="function">() =&gt;</span> [],</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">toolbarConfig</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="title class_">Object</span> <span class="keyword">as</span> <span class="title class_">PropType</span>&lt;<span class="title class_">ToolbarConfig</span>&gt;,</span><br><span class="line">      <span class="attr">default</span>: <span class="function">() =&gt;</span> (&#123;&#125;),</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">loading</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="title class_">Boolean</span>,</span><br><span class="line">      <span class="attr">default</span>: <span class="literal">false</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">emits</span>: &#123;</span><br><span class="line">    <span class="string">&quot;toolbar-action&quot;</span>: <span class="function">(<span class="params"><span class="attr">payload</span>: &#123;</span></span></span><br><span class="line"><span class="params"><span class="function">      item: ToolbarItem;</span></span></span><br><span class="line"><span class="params"><span class="function">      context: ToolbarContext;</span></span></span><br><span class="line"><span class="params"><span class="function">    &#125;</span>) =&gt;</span> <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;selection-change&quot;</span>: <span class="function">(<span class="params"><span class="attr">selection</span>: <span class="title class_">TableDataItem</span>[]</span>) =&gt;</span> <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;sort-change&quot;</span>: <span class="function">(<span class="params"><span class="attr">sortConfig</span>: <span class="title class_">SortConfig</span></span>) =&gt;</span> <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="2-3-类型定义文件的组织结构"><a href="#2-3-类型定义文件的组织结构" class="headerlink" title="2.3 类型定义文件的组织结构"></a>2.3 类型定义文件的组织结构</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/shims-vue.d.ts - Vue 类型声明</span></span><br><span class="line"><span class="keyword">declare</span> <span class="variable language_">module</span> <span class="string">&quot;*.vue&quot;</span> &#123;</span><br><span class="line">  <span class="keyword">import</span> <span class="keyword">type</span> &#123; <span class="title class_">DefineComponent</span> &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line">  <span class="keyword">const</span> <span class="attr">component</span>: <span class="title class_">DefineComponent</span>&lt;&#123;&#125;, &#123;&#125;, <span class="built_in">any</span>&gt;;</span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">default</span> component;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// src/types/vue-shim.d.ts - Vue 相关类型扩展</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">type</span> &#123; <span class="title class_">ComponentTheme</span>, <span class="title class_">ComponentSize</span> &#125; <span class="keyword">from</span> <span class="string">&quot;./index&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">declare</span> <span class="variable language_">module</span> <span class="string">&quot;vue&quot;</span> &#123;</span><br><span class="line">  <span class="keyword">interface</span> <span class="title class_">ComponentCustomProperties</span> &#123;</span><br><span class="line">    <span class="attr">$theme</span>: &#123;</span><br><span class="line">      <span class="attr">current</span>: <span class="function">() =&gt;</span> <span class="title class_">ComponentTheme</span>;</span><br><span class="line">      <span class="attr">set</span>: <span class="function">(<span class="params"><span class="attr">theme</span>: <span class="title class_">ComponentTheme</span></span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">      <span class="attr">override</span>: <span class="function">(<span class="params"><span class="attr">overrides</span>: <span class="title class_">Partial</span>&lt;<span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="built_in">any</span>&gt;&gt;</span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// src/types/element-ui.d.ts - Element UI 类型增强</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;@element-ui/types&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">declare</span> <span class="variable language_">module</span> <span class="string">&quot;element-ui/types&quot;</span> &#123;</span><br><span class="line">  <span class="keyword">interface</span> <span class="title class_">ElTable</span> &#123;</span><br><span class="line">    <span class="attr">$props</span>: <span class="title class_">ElTableProps</span> &amp; &#123;</span><br><span class="line">      <span class="string">&quot;v-model&quot;</span>?: <span class="built_in">any</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="三、现有-JavaScript-代码的类型迁移策略"><a href="#三、现有-JavaScript-代码的类型迁移策略" class="headerlink" title="三、现有 JavaScript 代码的类型迁移策略"></a>三、现有 JavaScript 代码的类型迁移策略</h2><h3 id="3-1-JSDoc-注释的类型标注"><a href="#3-1-JSDoc-注释的类型标注" class="headerlink" title="3.1 JSDoc 注释的类型标注"></a>3.1 JSDoc 注释的类型标注</h3><p>在完全迁移到 TypeScript 之前，使用 JSDoc 添加类型信息：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/utils/api.js - JSDoc 类型标注</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@typedef</span> &#123;<span class="type">Object</span>&#125; <span class="variable">ApiResponse</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@property</span> &#123;<span class="type">boolean</span>&#125; <span class="variable">success</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@property</span> &#123;<span class="type">string</span>&#125; <span class="variable">message</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@property</span> &#123;<span class="type">any</span>&#125; <span class="variable">data</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@property</span> &#123;<span class="type">number</span>&#125; <span class="variable">code</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@typedef</span> &#123;<span class="type">Object</span>&#125; <span class="variable">UserInfo</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@property</span> &#123;<span class="type">string</span>&#125; <span class="variable">id</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@property</span> &#123;<span class="type">string</span>&#125; <span class="variable">username</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@property</span> &#123;<span class="type">string</span>&#125; <span class="variable">email</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@property</span> &#123;<span class="type">string</span>&#125; <span class="variable">role</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@property</span> &#123;<span class="type">boolean</span>&#125; <span class="variable">active</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取用户信息</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">userId</span> - 用户ID</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">Promise&lt;ApiResponse&lt;UserInfo&gt;&gt;</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getUserInfo</span>(<span class="params">userId</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">fetch</span>(<span class="string">`/api/users/<span class="subst">$&#123;userId&#125;</span>`</span>)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function">(<span class="params">response</span>) =&gt;</span> response.<span class="title function_">json</span>())</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function">(<span class="params">data</span>) =&gt;</span> (&#123;</span><br><span class="line">      <span class="attr">success</span>: <span class="literal">true</span>,</span><br><span class="line">      data,</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&quot;获取成功&quot;</span>,</span><br><span class="line">      <span class="attr">code</span>: <span class="number">200</span>,</span><br><span class="line">    &#125;))</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function">(<span class="params">error</span>) =&gt;</span> (&#123;</span><br><span class="line">      <span class="attr">success</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">data</span>: <span class="literal">null</span>,</span><br><span class="line">      <span class="attr">message</span>: error.<span class="property">message</span>,</span><br><span class="line">      <span class="attr">code</span>: <span class="number">500</span>,</span><br><span class="line">    &#125;));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-2-渐进式重构策略"><a href="#3-2-渐进式重构策略" class="headerlink" title="3.2 渐进式重构策略"></a>3.2 渐进式重构策略</h3><h4 id="重构步骤一：添加类型注释"><a href="#重构步骤一：添加类型注释" class="headerlink" title="重构步骤一：添加类型注释"></a>重构步骤一：添加类型注释</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 重构前</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">processTableData</span>(<span class="params">data, config</span>) &#123;</span><br><span class="line">  <span class="comment">// 处理表格数据</span></span><br><span class="line">  <span class="keyword">return</span> data.<span class="title function_">map</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> (&#123;</span><br><span class="line">    ...item,</span><br><span class="line">    <span class="attr">formattedValue</span>: <span class="title function_">formatValue</span>(item.<span class="property">value</span>, config.<span class="property">precision</span>),</span><br><span class="line">  &#125;));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 重构后：添加 JSDoc 类型</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Array</span>&#125; <span class="variable">data</span> - 原始数据</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Object</span>&#125; <span class="variable">config</span> - 配置对象</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; config.precision - 精度</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">Array</span>&#125; 处理后的数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">processTableData</span>(<span class="params">data, config</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> data.<span class="title function_">map</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> (&#123;</span><br><span class="line">    ...item,</span><br><span class="line">    <span class="attr">formattedValue</span>: <span class="title function_">formatValue</span>(item.<span class="property">value</span>, config.<span class="property">precision</span>),</span><br><span class="line">  &#125;));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="重构步骤二：转换为-TypeScript"><a href="#重构步骤二：转换为-TypeScript" class="headerlink" title="重构步骤二：转换为 TypeScript"></a>重构步骤二：转换为 TypeScript</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// types/data.ts</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">TableDataItem</span> &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">value</span>: <span class="built_in">number</span>;</span><br><span class="line">  [<span class="attr">key</span>: <span class="built_in">string</span>]: <span class="built_in">any</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">TableConfig</span> &#123;</span><br><span class="line">  <span class="attr">precision</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="attr">currency</span>?: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">showTrend</span>?: <span class="built_in">boolean</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// utils/data.ts</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">processTableData</span>(<span class="params"></span></span><br><span class="line"><span class="params">  <span class="attr">data</span>: <span class="title class_">TableDataItem</span>[],</span></span><br><span class="line"><span class="params">  <span class="attr">config</span>: <span class="title class_">TableConfig</span></span></span><br><span class="line"><span class="params"></span>): <span class="title class_">TableDataItem</span>[] &#123;</span><br><span class="line">  <span class="keyword">return</span> data.<span class="title function_">map</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> (&#123;</span><br><span class="line">    ...item,</span><br><span class="line">    <span class="attr">formattedValue</span>: <span class="title function_">formatValue</span>(item.<span class="property">value</span>, config.<span class="property">precision</span>),</span><br><span class="line">  &#125;));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="重构步骤三：组件重构"><a href="#重构步骤三：组件重构" class="headerlink" title="重构步骤三：组件重构"></a>重构步骤三：组件重构</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 重构前：纯 JavaScript 组件</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">props</span>: &#123;</span><br><span class="line">    <span class="attr">data</span>: <span class="title class_">Array</span>,</span><br><span class="line">    <span class="attr">config</span>: <span class="title class_">Object</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">computed</span>: &#123;</span><br><span class="line">    <span class="title function_">processedData</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">processTableData</span>(<span class="variable language_">this</span>.<span class="property">data</span>, <span class="variable language_">this</span>.<span class="property">config</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 重构后：TypeScript 组件</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">PropType</span> &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">type</span> &#123; <span class="title class_">TableDataItem</span>, <span class="title class_">TableConfig</span> &#125; <span class="keyword">from</span> <span class="string">&quot;@/types&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">props</span>: &#123;</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="title class_">Array</span> <span class="keyword">as</span> <span class="title class_">PropType</span>&lt;<span class="title class_">TableDataItem</span>[]&gt;,</span><br><span class="line">      <span class="attr">default</span>: <span class="function">() =&gt;</span> [],</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">config</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="title class_">Object</span> <span class="keyword">as</span> <span class="title class_">PropType</span>&lt;<span class="title class_">TableConfig</span>&gt;,</span><br><span class="line">      <span class="attr">default</span>: <span class="function">() =&gt;</span> (&#123; <span class="attr">precision</span>: <span class="number">2</span> &#125;),</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">computed</span>: &#123;</span><br><span class="line">    <span class="title function_">processedData</span>(): <span class="title class_">TableDataItem</span>[] &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">processTableData</span>(<span class="variable language_">this</span>.<span class="property">data</span>, <span class="variable language_">this</span>.<span class="property">config</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="3-3-类型检查工具的配置和使用"><a href="#3-3-类型检查工具的配置和使用" class="headerlink" title="3.3 类型检查工具的配置和使用"></a>3.3 类型检查工具的配置和使用</h3><h4 id="ESLint-TypeScript-集成"><a href="#ESLint-TypeScript-集成" class="headerlink" title="ESLint + TypeScript 集成"></a>ESLint + TypeScript 集成</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .eslintrc.js</span></span><br><span class="line">module.exports = <span class="punctuation">&#123;</span></span><br><span class="line">  parser<span class="punctuation">:</span> &#x27;@typescript-eslint/parser&#x27;<span class="punctuation">,</span></span><br><span class="line">  plugins<span class="punctuation">:</span> <span class="punctuation">[</span>&#x27;@typescript-eslint&#x27;<span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  extends<span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    &#x27;eslint<span class="punctuation">:</span>recommended&#x27;<span class="punctuation">,</span></span><br><span class="line">    &#x27;@typescript-eslint/recommended&#x27;<span class="punctuation">,</span></span><br><span class="line">    &#x27;plugin<span class="punctuation">:</span>vue/vue3-essential&#x27;</span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  rules<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="comment">// 渐进式启用类型检查规则</span></span><br><span class="line">    &#x27;@typescript-eslint/no-unused-vars&#x27;<span class="punctuation">:</span> &#x27;warn&#x27;<span class="punctuation">,</span></span><br><span class="line">    &#x27;@typescript-eslint/no-explicit-any&#x27;<span class="punctuation">:</span> &#x27;off&#x27;<span class="punctuation">,</span> <span class="comment">// 初期允许 any</span></span><br><span class="line">    &#x27;@typescript-eslint/explicit-function-return-type&#x27;<span class="punctuation">:</span> &#x27;off&#x27;</span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="VS-Code-配置优化"><a href="#VS-Code-配置优化" class="headerlink" title="VS Code 配置优化"></a>VS Code 配置优化</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .vscode/settings.json</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;typescript.preferences.includePackageJsonAutoImports&quot;</span><span class="punctuation">:</span> <span class="string">&quot;auto&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;typescript.suggest.autoImports&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;typescript.preferences.preferTypeOnlyAutoImports&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;vue.server.hybridMode&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="四、类型安全与开发效率的平衡"><a href="#四、类型安全与开发效率的平衡" class="headerlink" title="四、类型安全与开发效率的平衡"></a>四、类型安全与开发效率的平衡</h2><h3 id="4-1-实用主义类型策略"><a href="#4-1-实用主义类型策略" class="headerlink" title="4.1 实用主义类型策略"></a>4.1 实用主义类型策略</h3><h4 id="合理的-any-使用"><a href="#合理的-any-使用" class="headerlink" title="合理的 any 使用"></a>合理的 any 使用</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ✅ 合理的 any 使用场景</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ApiResponse</span>&lt;T = <span class="built_in">any</span>&gt; &#123;</span><br><span class="line">  <span class="attr">success</span>: <span class="built_in">boolean</span>;</span><br><span class="line">  <span class="attr">data</span>: T;</span><br><span class="line">  <span class="attr">message</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在不确定类型时使用 unknown 而非 any</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">processUnknownData</span>(<span class="params"><span class="attr">data</span>: <span class="built_in">unknown</span></span>): <span class="built_in">string</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> data === <span class="string">&quot;string&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> data.<span class="title function_">toUpperCase</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> data === <span class="string">&quot;number&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> data.<span class="title function_">toString</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;unknown&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="渐进式严格模式"><a href="#渐进式严格模式" class="headerlink" title="渐进式严格模式"></a>渐进式严格模式</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// tsconfig.json - 不同阶段的严格程度</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="comment">// 阶段一：基础类型检查</span></span><br><span class="line">    <span class="attr">&quot;strict&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;noImplicitAny&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;strictNullChecks&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 阶段二：中等严格</span></span><br><span class="line">    <span class="attr">&quot;noImplicitAny&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;strictNullChecks&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 阶段三：完全严格</span></span><br><span class="line">    <span class="attr">&quot;strict&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;exactOptionalPropertyTypes&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-2-类型定义的维护策略"><a href="#4-2-类型定义的维护策略" class="headerlink" title="4.2 类型定义的维护策略"></a>4.2 类型定义的维护策略</h3><h4 id="第三方库类型补充"><a href="#第三方库类型补充" class="headerlink" title="第三方库类型补充"></a>第三方库类型补充</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/types/element-ui-fix.d.ts</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;element-ui&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">declare</span> <span class="variable language_">module</span> <span class="string">&quot;element-ui&quot;</span> &#123;</span><br><span class="line">  <span class="keyword">interface</span> <span class="title class_">ElTable</span> &#123;</span><br><span class="line">    <span class="attr">$props</span>: <span class="title class_">ElTableProps</span> &amp; &#123;</span><br><span class="line">      <span class="string">&quot;v-model&quot;</span>?: <span class="built_in">any</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">interface</span> <span class="title class_">ElForm</span> &#123;</span><br><span class="line">    <span class="attr">validate</span>: <span class="function">(<span class="params"><span class="attr">callback</span>?: (valid: <span class="built_in">boolean</span>) =&gt; <span class="built_in">void</span></span>) =&gt;</span> <span class="title class_">Promise</span>&lt;<span class="built_in">boolean</span>&gt;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="通用工具类型的积累"><a href="#通用工具类型的积累" class="headerlink" title="通用工具类型的积累"></a>通用工具类型的积累</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/types/utils.ts</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> <span class="title class_">Nullable</span>&lt;T&gt; = T | <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> <span class="title class_">Undefinable</span>&lt;T&gt; = T | <span class="literal">undefined</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> <span class="title class_">Optional</span>&lt;T, K <span class="keyword">extends</span> keyof T&gt; = <span class="title class_">Omit</span>&lt;T, K&gt; &amp; <span class="title class_">Partial</span>&lt;<span class="title class_">Pick</span>&lt;T, K&gt;&gt;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> <span class="title class_">ArrayElement</span>&lt;T&gt; = T <span class="title function_">extends</span> (infer U)[] ? U : <span class="built_in">never</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> <span class="title class_">ValueOf</span>&lt;T&gt; = T[keyof T];</span><br><span class="line"></span><br><span class="line"><span class="comment">// Vue 相关工具类型</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> <span class="title class_">VueProps</span>&lt;T&gt; = &#123;</span><br><span class="line">  [K <span class="keyword">in</span> keyof T]: <span class="title class_">PropType</span>&lt;T[K]&gt;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> <span class="title class_">VueEmits</span>&lt;T&gt; = &#123;</span><br><span class="line">  [K <span class="keyword">in</span> keyof T]: <span class="function">(<span class="params"><span class="attr">payload</span>: T[K]</span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="五、构建工具与开发工具链的类型支持"><a href="#五、构建工具与开发工具链的类型支持" class="headerlink" title="五、构建工具与开发工具链的类型支持"></a>五、构建工具与开发工具链的类型支持</h2><h3 id="5-1-Webpack-TypeScript-配置"><a href="#5-1-Webpack-TypeScript-配置" class="headerlink" title="5.1 Webpack + TypeScript 配置"></a>5.1 Webpack + TypeScript 配置</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">VueLoaderPlugin</span> &#125; = <span class="built_in">require</span>(<span class="string">&quot;vue-loader&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">resolve</span>: &#123;</span><br><span class="line">    <span class="attr">extensions</span>: [<span class="string">&quot;.ts&quot;</span>, <span class="string">&quot;.js&quot;</span>, <span class="string">&quot;.vue&quot;</span>],</span><br><span class="line">    <span class="attr">alias</span>: &#123;</span><br><span class="line">      <span class="string">&quot;@&quot;</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;src&quot;</span>),</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.vue$/</span>,</span><br><span class="line">        <span class="attr">loader</span>: <span class="string">&quot;vue-loader&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.ts$/</span>,</span><br><span class="line">        <span class="attr">loader</span>: <span class="string">&quot;ts-loader&quot;</span>,</span><br><span class="line">        <span class="attr">options</span>: &#123;</span><br><span class="line">          <span class="attr">appendTsSuffixTo</span>: [<span class="regexp">/\.vue$/</span>],</span><br><span class="line">          <span class="attr">transpileOnly</span>: <span class="literal">true</span>, <span class="comment">// 只做转译，不做类型检查</span></span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="keyword">new</span> <span class="title class_">VueLoaderPlugin</span>()],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="5-2-开发工具的-TypeScript-支持"><a href="#5-2-开发工具的-TypeScript-支持" class="headerlink" title="5.2 开发工具的 TypeScript 支持"></a>5.2 开发工具的 TypeScript 支持</h3><p>MS UI System 当前混合构建模式，开发环境使用 Vite 获得更好的开发体验，生产构建使用 Webpack 确保稳定性和功能完整性。</p>
<h2 id="构建工具选型的权衡"><a href="#构建工具选型的权衡" class="headerlink" title="构建工具选型的权衡"></a>构建工具选型的权衡</h2><h3 id="5-1-Vue-2-企业级项目的构建策略"><a href="#5-1-Vue-2-企业级项目的构建策略" class="headerlink" title="5.1 Vue 2 企业级项目的构建策略"></a>5.1 Vue 2 企业级项目的构建策略</h3><p>对于 Vue 2 企业级组件库，构建工具选型需要考虑以下因素：</p>
<p><strong>开发体验 vs 生产稳定性</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 当前混合模式</span></span><br><span class="line">开发环境：<span class="title class_">Vite</span>     <span class="comment">// 快速热重载，提升开发效率</span></span><br><span class="line">生产构建：<span class="title class_">Webpack</span>  <span class="comment">// 成熟生态，确保构建稳定性</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 技术栈考量</span></span><br><span class="line"><span class="title class_">Vue</span> <span class="number">2.6</span><span class="number">.14</span> + 企业级需求 → 优先考虑稳定性和生态成熟度</span><br><span class="line">现代化开发体验需求 → 适度引入 <span class="title class_">Vite</span> 优化开发流程</span><br></pre></td></tr></table></figure>

<p><strong>混合模式的合理性分析</strong>：</p>
<ul>
<li>✅ <strong>开发效率</strong>：Vite 提供秒级启动和热重载</li>
<li>✅ <strong>生产稳定</strong>：Webpack 的构建优化和插件生态更成熟</li>
<li>⚠️ <strong>维护成本</strong>：需要维护两套构建配置</li>
<li>⚠️ <strong>技术栈复杂度</strong>：团队需要熟悉两种构建工具</li>
</ul>
<h3 id="5-2-TypeScript-支持能力对比"><a href="#5-2-TypeScript-支持能力对比" class="headerlink" title="5.2 TypeScript 支持能力对比"></a>5.2 TypeScript 支持能力对比</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Vite + TypeScript (开发体验优先)</span></span><br><span class="line">✅ 原生 <span class="title class_">TypeScript</span> 支持，开箱即用</span><br><span class="line">✅ 基于 esbuild 的超快编译</span><br><span class="line">✅ 实时类型检查和错误提示</span><br><span class="line">⚠️ 生产构建优化相对有限</span><br><span class="line"></span><br><span class="line"><span class="comment">// Webpack + TypeScript (生产稳定优先)</span></span><br><span class="line">✅ 丰富的构建优化策略</span><br><span class="line">✅ 成熟的代码分割和打包优化</span><br><span class="line">✅ 企业级构建需求全面支持</span><br><span class="line">⚠️ 配置相对复杂，需要手动配置 loader</span><br></pre></td></tr></table></figure>

<p><strong>当前状态</strong>：项目已配置 TypeScript 基础设施，但实际组件代码仍使用 JavaScript，构建流程也未集成 TypeScript 处理。</p>
<h3 id="5-3-类型检查的-CI-CD-集成"><a href="#5-3-类型检查的-CI-CD-集成" class="headerlink" title="5.3 类型检查的 CI/CD 集成"></a>5.3 类型检查的 CI/CD 集成</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># .github/workflows/ci.yml</span></span><br><span class="line"><span class="attr">name:</span> <span class="string">CI</span></span><br><span class="line"><span class="attr">on:</span> [<span class="string">push</span>, <span class="string">pull_request</span>]</span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">type-check:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/setup-node@v2</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="string">&quot;18&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">npm</span> <span class="string">ci</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">npm</span> <span class="string">run</span> <span class="string">type-check</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">test:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/setup-node@v2</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="string">&quot;18&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">npm</span> <span class="string">ci</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">npm</span> <span class="string">run</span> <span class="string">test</span></span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// package.json</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;type-check&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vue-tsc --noEmit&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;type-check:watch&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vue-tsc --noEmit --watch&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;build:types&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vue-tsc --declaration --emitDeclarationOnly&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="六、技术储备评估与迁移规划总结"><a href="#六、技术储备评估与迁移规划总结" class="headerlink" title="六、技术储备评估与迁移规划总结"></a>六、技术储备评估与迁移规划总结</h2><h3 id="6-1-当前技术储备状态"><a href="#6-1-当前技术储备状态" class="headerlink" title="6.1 当前技术储备状态"></a>6.1 当前技术储备状态</h3><p>MS UI System 的 TypeScript 技术储备评估：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">ReadinessAssessment</span> &#123;</span><br><span class="line">  <span class="comment">// 基础设施准备</span></span><br><span class="line">  <span class="attr">infrastructure</span>: <span class="string">&quot;completed&quot;</span>; <span class="comment">// 基础设施配置完成</span></span><br><span class="line">  <span class="attr">typeDefinitions</span>: <span class="string">&quot;designed&quot;</span>; <span class="comment">// 类型定义体系已设计</span></span><br><span class="line">  <span class="attr">buildTools</span>: <span class="string">&quot;hybrid&quot;</span>; <span class="comment">// 混合构建模式（Vite + Webpack）</span></span><br><span class="line">  <span class="attr">teamPreparedness</span>: <span class="string">&quot;partial&quot;</span>; <span class="comment">// 团队技能需提升</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 风险评估</span></span><br><span class="line">  <span class="attr">migrationRisk</span>: <span class="string">&quot;medium&quot;</span>; <span class="comment">// 迁移风险中等</span></span><br><span class="line">  <span class="attr">businessImpact</span>: <span class="string">&quot;controlled&quot;</span>; <span class="comment">// 对业务影响可控</span></span><br><span class="line">  <span class="attr">technicalDebt</span>: <span class="string">&quot;low&quot;</span>; <span class="comment">// 技术债务较低</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">currentStatus</span>: <span class="title class_">ReadinessAssessment</span> = &#123;</span><br><span class="line">  <span class="attr">infrastructure</span>: <span class="string">&quot;completed&quot;</span>,</span><br><span class="line">  <span class="attr">typeDefinitions</span>: <span class="string">&quot;designed&quot;</span>,</span><br><span class="line">  <span class="attr">buildTools</span>: <span class="string">&quot;ready&quot;</span>,</span><br><span class="line">  <span class="attr">teamPreparedness</span>: <span class="string">&quot;partial&quot;</span>,</span><br><span class="line">  <span class="attr">migrationRisk</span>: <span class="string">&quot;medium&quot;</span>,</span><br><span class="line">  <span class="attr">businessImpact</span>: <span class="string">&quot;controlled&quot;</span>,</span><br><span class="line">  <span class="attr">technicalDebt</span>: <span class="string">&quot;low&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 技术储备完成度：70%</span></span><br><span class="line"><span class="keyword">const</span> readinessScore = <span class="number">70</span>;</span><br></pre></td></tr></table></figure>

<h4 id="代码规范与最佳实践"><a href="#代码规范与最佳实践" class="headerlink" title="代码规范与最佳实践"></a>代码规范与最佳实践</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ✅ 推荐的 TypeScript 写法</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ComponentProps</span> &#123;</span><br><span class="line">  <span class="keyword">readonly</span> <span class="attr">id</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">name</span>?: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">onChange</span>?: <span class="function">(<span class="params"><span class="attr">value</span>: <span class="built_in">string</span></span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ❌ 不推荐的写法</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">BadProps</span> &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="built_in">any</span>; <span class="comment">// 避免使用 any</span></span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span> | <span class="literal">undefined</span>; <span class="comment">// 使用可选属性</span></span><br><span class="line">  <span class="attr">callback</span>: <span class="title class_">Function</span>; <span class="comment">// 使用具体函数签名</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="工具链优化"><a href="#工具链优化" class="headerlink" title="工具链优化"></a>工具链优化</h4><ol>
<li><strong>IDE 配置</strong>：启用 TypeScript 智能提示和自动导入</li>
<li><strong>构建优化</strong>：配置增量类型检查和缓存</li>
<li><strong>代码生成</strong>：利用 TypeScript Compiler API 生成类型定义</li>
<li><strong>文档同步</strong>：自动生成基于类型的 API 文档</li>
</ol>
<h2 id="七、技术选型建议"><a href="#七、技术选型建议" class="headerlink" title="七、技术选型建议"></a>七、技术选型建议</h2><p>MS UI System 在 TypeScript 技术储备方面一些准备，但基于 Vue 2 企业级组件库的特点，目前保持 JavaScript 技术栈。</p>
<p><strong>技术储备完成情况：</strong></p>
<ol>
<li><strong>基础设施建设</strong>：TypeScript 技术栈配置 ✅</li>
<li><strong>类型定义设计</strong>：完善的组件和工具类型定义体系 📋</li>
<li><strong>混合构建模式</strong>：Vite（开发）+ Webpack（生产）⚖️</li>
<li><strong>风险评估完成</strong>：迁移策略和风险控制方案 📋</li>
</ol>
<p><strong>针对 MS UI System 的构建工具建议：</strong></p>
<p>当前混合模式虽然提供了开发便利（当然主要原因还是 vite 配置上的一些试错，迁移回 webpack），但<strong>建议统一使用 Webpack</strong>，主要原因包括：</p>
<ol>
<li><strong>生产构建的稳定性和功能完整性更重要</strong>：Webpack 在企业级构建需求支持方面更成熟</li>
<li><strong>Vue 2 生态对 Webpack 支持更完善</strong>：经过多年验证，问题更少，文档更全</li>
<li><strong>避免维护两套构建系统的复杂度</strong>：减少团队学习成本和维护负担</li>
</ol>
<p><strong>Vue 2 组件库的技术保守性考虑：</strong></p>
<ol>
<li><strong>用户群体特征</strong>：企业级用户更注重长期稳定性和维护成本</li>
<li><strong>生态成熟度</strong>：Vue 2 + Webpack 组合经过多年验证，问题更少</li>
<li><strong>技术栈一致性</strong>：避免混合模式带来的维护复杂度</li>
</ol>
<p><strong>未来发展规划：</strong></p>
<ol>
<li><strong>持续技术储备</strong>：保持 TypeScript 配置，为未来迁移做准备</li>
<li><strong>条件成熟时评估</strong>：基于 Vue 3 升级节奏重新评估</li>
<li><strong>渐进式优化</strong>：优先优化现有 JavaScript 代码质量</li>
<li><strong>构建工具统一</strong>：从混合模式向纯 Webpack 迁移</li>
</ol>
<p>MS UI System 通过理性的技术选型，既避免了技术冒险，又为未来的技术演进保留了可能性。笔者始终认为，<strong>技术稳定性和维护便利性往往比开发体验更重要</strong>。</p>
<hr>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
        
          <li><a href="/">Home</a></li>
        
          <li><a href="/about/">About</a></li>
        
          <li><a href="/archives/">Writing</a></li>
        
          <li><a href="https://github.com/apriljii">Projects</a></li>
        
      </ul>
    </div>

    
    
      <div id="toc-footer" style="display: none">
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81TypeScript-%E4%BD%BF%E7%94%A8%E7%9A%84%E6%8A%80%E6%9C%AF%E5%8F%AF%E8%A1%8C%E6%80%A7%E8%AF%84%E4%BC%B0"><span class="toc-number">2.</span> <span class="toc-text">一、TypeScript 使用的技术可行性评估</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-%E5%BD%93%E5%89%8D%E6%8A%80%E6%9C%AF%E6%A0%88%E7%8E%B0%E7%8A%B6%E5%88%86%E6%9E%90"><span class="toc-number">2.1.</span> <span class="toc-text">1.1 当前技术栈现状分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-Vue-2-TypeScript-%E7%9A%84%E6%8A%80%E6%9C%AF%E6%8C%91%E6%88%98%E8%AF%84%E4%BC%B0"><span class="toc-number">2.2.</span> <span class="toc-text">1.2 Vue 2 + TypeScript 的技术挑战评估</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-TypeScript-%E6%8A%80%E6%9C%AF%E6%A0%88%E9%80%89%E5%9E%8B%E8%A7%84%E5%88%92"><span class="toc-number">2.3.</span> <span class="toc-text">1.3 TypeScript 技术栈选型规划</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81TypeScript-%E8%BF%81%E7%A7%BB%E8%A7%84%E5%88%92%E4%B8%8E%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="toc-number">3.</span> <span class="toc-text">二、TypeScript 迁移规划与准备工作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E7%B1%BB%E5%9E%8B%E5%AE%9A%E4%B9%89%E4%BD%93%E7%B3%BB%E5%BB%BA%E8%AE%BE%E8%A7%84%E5%88%92"><span class="toc-number">3.1.</span> <span class="toc-text">2.1 类型定义体系建设规划</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E6%B8%90%E8%BF%9B%E5%BC%8F%E8%BF%81%E7%A7%BB%E7%AD%96%E7%95%A5%E8%A7%84%E5%88%92"><span class="toc-number">3.2.</span> <span class="toc-text">2.2 渐进式迁移策略规划</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%98%B6%E6%AE%B5%E4%B8%80%EF%BC%9A%E5%9F%BA%E7%A1%80%E8%AE%BE%E6%96%BD%E5%AE%8C%E5%96%84%EF%BC%88%E5%B7%B2%E5%AE%8C%E6%88%90%EF%BC%89"><span class="toc-number">3.2.1.</span> <span class="toc-text">阶段一：基础设施完善（已完成）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%98%B6%E6%AE%B5%E4%BA%8C%EF%BC%9A%E7%B1%BB%E5%9E%8B%E5%AE%9A%E4%B9%89%E4%BD%93%E7%B3%BB%E5%BB%BA%E8%AE%BE%EF%BC%88%E8%A7%84%E5%88%92%E4%B8%AD%EF%BC%89"><span class="toc-number">3.2.2.</span> <span class="toc-text">阶段二：类型定义体系建设（规划中）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%98%B6%E6%AE%B5%E4%BA%8C%EF%BC%9AVue-%E7%BB%84%E4%BB%B6%E7%9A%84%E7%B1%BB%E5%9E%8B%E5%8C%96"><span class="toc-number">3.2.3.</span> <span class="toc-text">阶段二：Vue 组件的类型化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E7%BB%84%E4%BB%B6%E7%B1%BB%E5%9E%8B%E5%8C%96%E8%BF%81%E7%A7%BB%EF%BC%88%E5%BE%85%E5%AE%9E%E6%96%BD%EF%BC%89"><span class="toc-number">3.2.4.</span> <span class="toc-text">阶段三：组件类型化迁移（待实施）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%98%B6%E6%AE%B5%E5%9B%9B%EF%BC%9A%E7%94%9F%E6%80%81%E7%B3%BB%E7%BB%9F%E5%AE%8C%E5%96%84%EF%BC%88%E9%95%BF%E6%9C%9F%E8%A7%84%E5%88%92%EF%BC%89"><span class="toc-number">3.2.5.</span> <span class="toc-text">阶段四：生态系统完善（长期规划）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E7%B1%BB%E5%9E%8B%E5%AE%9A%E4%B9%89%E6%96%87%E4%BB%B6%E7%9A%84%E7%BB%84%E7%BB%87%E7%BB%93%E6%9E%84"><span class="toc-number">3.3.</span> <span class="toc-text">2.3 类型定义文件的组织结构</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E7%8E%B0%E6%9C%89-JavaScript-%E4%BB%A3%E7%A0%81%E7%9A%84%E7%B1%BB%E5%9E%8B%E8%BF%81%E7%A7%BB%E7%AD%96%E7%95%A5"><span class="toc-number">4.</span> <span class="toc-text">三、现有 JavaScript 代码的类型迁移策略</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-JSDoc-%E6%B3%A8%E9%87%8A%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%A0%87%E6%B3%A8"><span class="toc-number">4.1.</span> <span class="toc-text">3.1 JSDoc 注释的类型标注</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E6%B8%90%E8%BF%9B%E5%BC%8F%E9%87%8D%E6%9E%84%E7%AD%96%E7%95%A5"><span class="toc-number">4.2.</span> <span class="toc-text">3.2 渐进式重构策略</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%87%8D%E6%9E%84%E6%AD%A5%E9%AA%A4%E4%B8%80%EF%BC%9A%E6%B7%BB%E5%8A%A0%E7%B1%BB%E5%9E%8B%E6%B3%A8%E9%87%8A"><span class="toc-number">4.2.1.</span> <span class="toc-text">重构步骤一：添加类型注释</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%87%8D%E6%9E%84%E6%AD%A5%E9%AA%A4%E4%BA%8C%EF%BC%9A%E8%BD%AC%E6%8D%A2%E4%B8%BA-TypeScript"><span class="toc-number">4.2.2.</span> <span class="toc-text">重构步骤二：转换为 TypeScript</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%87%8D%E6%9E%84%E6%AD%A5%E9%AA%A4%E4%B8%89%EF%BC%9A%E7%BB%84%E4%BB%B6%E9%87%8D%E6%9E%84"><span class="toc-number">4.2.3.</span> <span class="toc-text">重构步骤三：组件重构</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E7%B1%BB%E5%9E%8B%E6%A3%80%E6%9F%A5%E5%B7%A5%E5%85%B7%E7%9A%84%E9%85%8D%E7%BD%AE%E5%92%8C%E4%BD%BF%E7%94%A8"><span class="toc-number">4.3.</span> <span class="toc-text">3.3 类型检查工具的配置和使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ESLint-TypeScript-%E9%9B%86%E6%88%90"><span class="toc-number">4.3.1.</span> <span class="toc-text">ESLint + TypeScript 集成</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#VS-Code-%E9%85%8D%E7%BD%AE%E4%BC%98%E5%8C%96"><span class="toc-number">4.3.2.</span> <span class="toc-text">VS Code 配置优化</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E7%B1%BB%E5%9E%8B%E5%AE%89%E5%85%A8%E4%B8%8E%E5%BC%80%E5%8F%91%E6%95%88%E7%8E%87%E7%9A%84%E5%B9%B3%E8%A1%A1"><span class="toc-number">5.</span> <span class="toc-text">四、类型安全与开发效率的平衡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E5%AE%9E%E7%94%A8%E4%B8%BB%E4%B9%89%E7%B1%BB%E5%9E%8B%E7%AD%96%E7%95%A5"><span class="toc-number">5.1.</span> <span class="toc-text">4.1 实用主义类型策略</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%88%E7%90%86%E7%9A%84-any-%E4%BD%BF%E7%94%A8"><span class="toc-number">5.1.1.</span> <span class="toc-text">合理的 any 使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B8%90%E8%BF%9B%E5%BC%8F%E4%B8%A5%E6%A0%BC%E6%A8%A1%E5%BC%8F"><span class="toc-number">5.1.2.</span> <span class="toc-text">渐进式严格模式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E7%B1%BB%E5%9E%8B%E5%AE%9A%E4%B9%89%E7%9A%84%E7%BB%B4%E6%8A%A4%E7%AD%96%E7%95%A5"><span class="toc-number">5.2.</span> <span class="toc-text">4.2 类型定义的维护策略</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93%E7%B1%BB%E5%9E%8B%E8%A1%A5%E5%85%85"><span class="toc-number">5.2.1.</span> <span class="toc-text">第三方库类型补充</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%9A%E7%94%A8%E5%B7%A5%E5%85%B7%E7%B1%BB%E5%9E%8B%E7%9A%84%E7%A7%AF%E7%B4%AF"><span class="toc-number">5.2.2.</span> <span class="toc-text">通用工具类型的积累</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E4%B8%8E%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%93%BE%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%94%AF%E6%8C%81"><span class="toc-number">6.</span> <span class="toc-text">五、构建工具与开发工具链的类型支持</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-Webpack-TypeScript-%E9%85%8D%E7%BD%AE"><span class="toc-number">6.1.</span> <span class="toc-text">5.1 Webpack + TypeScript 配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E7%9A%84-TypeScript-%E6%94%AF%E6%8C%81"><span class="toc-number">6.2.</span> <span class="toc-text">5.2 开发工具的 TypeScript 支持</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E9%80%89%E5%9E%8B%E7%9A%84%E6%9D%83%E8%A1%A1"><span class="toc-number">7.</span> <span class="toc-text">构建工具选型的权衡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-Vue-2-%E4%BC%81%E4%B8%9A%E7%BA%A7%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%9E%84%E5%BB%BA%E7%AD%96%E7%95%A5"><span class="toc-number">7.1.</span> <span class="toc-text">5.1 Vue 2 企业级项目的构建策略</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-TypeScript-%E6%94%AF%E6%8C%81%E8%83%BD%E5%8A%9B%E5%AF%B9%E6%AF%94"><span class="toc-number">7.2.</span> <span class="toc-text">5.2 TypeScript 支持能力对比</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-%E7%B1%BB%E5%9E%8B%E6%A3%80%E6%9F%A5%E7%9A%84-CI-CD-%E9%9B%86%E6%88%90"><span class="toc-number">7.3.</span> <span class="toc-text">5.3 类型检查的 CI&#x2F;CD 集成</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E6%8A%80%E6%9C%AF%E5%82%A8%E5%A4%87%E8%AF%84%E4%BC%B0%E4%B8%8E%E8%BF%81%E7%A7%BB%E8%A7%84%E5%88%92%E6%80%BB%E7%BB%93"><span class="toc-number">8.</span> <span class="toc-text">六、技术储备评估与迁移规划总结</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-%E5%BD%93%E5%89%8D%E6%8A%80%E6%9C%AF%E5%82%A8%E5%A4%87%E7%8A%B6%E6%80%81"><span class="toc-number">8.1.</span> <span class="toc-text">6.1 当前技术储备状态</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5"><span class="toc-number">8.1.1.</span> <span class="toc-text">代码规范与最佳实践</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B7%A5%E5%85%B7%E9%93%BE%E4%BC%98%E5%8C%96"><span class="toc-number">8.1.2.</span> <span class="toc-text">工具链优化</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E6%8A%80%E6%9C%AF%E9%80%89%E5%9E%8B%E5%BB%BA%E8%AE%AE"><span class="toc-number">9.</span> <span class="toc-text">七、技术选型建议</span></a></li></ol>
      </div>
    

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://apriljii.github.io/2024/04/19/06-typescript-gradual-adoption/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://apriljii.github.io/2024/04/19/06-typescript-gradual-adoption/&text=企业级Vue组件库建设-6. TypeScript渐进式采用与技术储备"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://apriljii.github.io/2024/04/19/06-typescript-gradual-adoption/&title=企业级Vue组件库建设-6. TypeScript渐进式采用与技术储备"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://apriljii.github.io/2024/04/19/06-typescript-gradual-adoption/&is_video=false&description=企业级Vue组件库建设-6. TypeScript渐进式采用与技术储备"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=企业级Vue组件库建设-6. TypeScript渐进式采用与技术储备&body=Check out this article: https://apriljii.github.io/2024/04/19/06-typescript-gradual-adoption/"><i class="fa-solid fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://apriljii.github.io/2024/04/19/06-typescript-gradual-adoption/&title=企业级Vue组件库建设-6. TypeScript渐进式采用与技术储备"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://apriljii.github.io/2024/04/19/06-typescript-gradual-adoption/&title=企业级Vue组件库建设-6. TypeScript渐进式采用与技术储备"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://apriljii.github.io/2024/04/19/06-typescript-gradual-adoption/&title=企业级Vue组件库建设-6. TypeScript渐进式采用与技术储备"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://apriljii.github.io/2024/04/19/06-typescript-gradual-adoption/&title=企业级Vue组件库建设-6. TypeScript渐进式采用与技术储备"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://apriljii.github.io/2024/04/19/06-typescript-gradual-adoption/&name=企业级Vue组件库建设-6. TypeScript渐进式采用与技术储备&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://news.ycombinator.com/submitlink?u=https://apriljii.github.io/2024/04/19/06-typescript-gradual-adoption/&t=企业级Vue组件库建设-6. TypeScript渐进式采用与技术储备"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa-solid fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        
          <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa-solid fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa-solid fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2016-2026
    April Ji
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/about/">About</a></li><!--
     --><!--
       --><li><a href="/archives/">Writing</a></li><!--
     --><!--
       --><li><a href="https://github.com/apriljii">Projects</a></li><!--
     -->
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script>




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script>
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="fa-regular fa-clone"></i>';
    btn += '</span>';
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Disqus Comments -->

<!-- utterances Comments -->

</body>
</html>
